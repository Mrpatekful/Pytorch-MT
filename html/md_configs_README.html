<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PyTorch-MT: Configs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PyTorch-MT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Configs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The application has to be provided with two main components, a model, that will be used to solve a given a problem, and task, which describes the problem, and the way that the model will be used to solve it.</p>
<p>According to the previously defined structure, the application currently accepts the model and task descriptors in the form of <b>JSON</b> files.</p>
<p>There are several types of descriptors:</p>
<ol type="1">
<li>Model</li>
<li>Experiment</li>
<li>Language</li>
<li>Policy</li>
<li>Translator</li>
<li>Reguralizer</li>
</ol>
<p>The first step to start an experiment, is to create it's configuration file. The specific parameters, which must be provided in the configuration are described in the class-level attribute <code>interface</code> of the experiment. All classes, which take part in the configuration assembly mechanism, must inherit from <code>Component</code> abstract base class. This provides the required class level fields, which are the previously mentioned <code>interface</code> (<code>Interface</code> type object) and <code>abstract</code> (bool value). During the assembly mechanism the builder object parses the provided configuration file, and detects the type of the node, which is given in the <code>type</code> entry of the <b>JSON</b>. It then iterates through the <code>interface</code> attribute of the detected class, and fetches the required parameters from the <code>params</code> entry of the configuration file. During this step, the builder may find an entry, that can't be given as a single parameter, since it may also be a complex component type object, such as the currently assembled experiment. There are multiple ways to define these objects, but the most common is to create a <b>JSON</b> object, that contains the type and its parameters. If the list of parameters is too long, or this object also contains a complex type, then it can also be a symbolic link to a file, that contains the configuration. Another way to create a complex parameter, is to define multiple instances in the configuration file, by either packing them in a list, or a <b>JSON</b> object. If the currently assembled object does not require any identifier paired with the complex instances, then it is enough to pass it as a list, otherwise the builder object will create a python dictionary, containing the entries with the defined name.</p>
<h3>Experiment configurations</h3>
<p>Experiment configurations must follow the format, which is described in the following examples.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &quot;type&quot;: &quot;&lt;Experiment Type&gt;&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &quot;params&quot;: {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    },</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    &quot;model_dir&quot;: &quot;&lt;Output Path&gt;&quot;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div></div><!-- fragment --><p>The previous <b>JSON</b> file is a general scheme for an experiment configuration file. The value of <code>type</code> entry defines the experiment, and the <code>params</code> entry contains a <b>JSON</b> object for declaring the parameters. <code>model_dir</code> contains the location of the outputs and logs for the experiment.</p>
<p>The following configuration, with the corresponding interface definition may be a viable description for an experiment.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;interface = Interface(**{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        &#39;policy&#39;:               (0, Policy),</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        &#39;language_identifiers&#39;: (1, None),</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        &#39;languages&#39;:            (2, Language),</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        &#39;model&#39;:                (3, Model),</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        &#39;initial_translator&#39;:   (4, WordTranslator),</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        &#39;reguralizer&#39;:          (5, Classifier)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;})</div></div><!-- fragment --><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &quot;type&quot;: &quot;MergedCurriculumTranslation&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &quot;params&quot;: {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        &quot;policy&quot;: &quot;configs/utils/policies/policy.json&quot;,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        &quot;language_identifiers&quot;: [</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            &quot;&lt;ENG&gt;&quot;,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            &quot;&lt;FRA&gt;&quot;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        ],</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        &quot;languages&quot;: [</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;            &quot;configs/utils/languages/english.json&quot;,</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;            &quot;configs/utils/languages/french.json&quot;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        ],</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        &quot;model&quot;: &quot;configs/models/sts.json&quot;,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        &quot;initial_translator&quot;: &quot;configs/utils/translators/word.json&quot;,</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        &quot;reguralizer&quot;: &quot;configs/components/reguralizers/mlp.json&quot;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    },</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    &quot;model_dir&quot;: &quot;model_outputs/unmt_3&quot;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;}</div></div><!-- fragment --><p>The type of the experiment is <code>MergedCurriculumTranslation</code>, that requires a <code>policy</code>, which is a complex parameter, that defines specific behaviours for the model during training, validation or testing phase. <code>language_identifiers</code> is a primitive, that should contain a list of strings, which will identify the languages, that are used in the experiment. <code>languages</code> is a complex parameter, that yields its values as a list. A <code>Language</code> object defines the input pipelines and the vocabulary for a language. <code>model</code> is the configuration for the model, that will be in the experiment. For further examples see the pre-defined experiment configurations in the */configs/tasks* directory.</p>
<h3>Model configurations</h3>
<p>Model configurations must follow the format, which is described in the following examples.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &quot;type&quot;: &quot;&lt;Model Type&gt;&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &quot;params&quot;: &quot;&lt;Model Components&quot;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --><p>The following example shows a possible configuration for the model.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &quot;type&quot;: &quot;SeqToSeq&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &quot;params&quot;: {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        &quot;encoder&quot;:  {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            &quot;type&quot;: &quot;UnidirectionalRNNEncoder&quot;,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            &quot;params&quot;: {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;                &quot;hidden_size&quot;: 100,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;                &quot;recurrent_type&quot;: &quot;LSTM&quot;,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                &quot;num_layers&quot;: 3,</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                &quot;optimizer_type&quot;: &quot;Adam&quot;,</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                &quot;learning_rate&quot;: 0.01</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;            }</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        },</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        &quot;decoder&quot;: {</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            &quot;type&quot;: &quot;RNNDecoder&quot;,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;            &quot;params&quot;: {</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                &quot;hidden_size&quot;: 100,</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                &quot;recurrent_type&quot;: &quot;LSTM&quot;,</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                &quot;num_layers&quot;: 3,</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;                &quot;optimizer_type&quot;: &quot;Adam&quot;,</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                &quot;learning_rate&quot;: 0.01,</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                &quot;max_length&quot;: 15</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            }</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        }</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    }</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;}</div></div><!-- fragment --><p> The type for the model was defined as sequence to sequence, which requires an encoder and decoder as it's components. *(To learn more about the required parameters for a given model, see the corresponding README.md files in the modules directories.)* In case of the <code>SeqToSeq</code> model, <code>encoder</code> and <code>encoder</code> are required nodes, and there will be an error message indicating their absence. After parsing the defined type of components, the application will look for the parameters required for the instantiation. The parameters shown in the example are *(currently)* sufficient for any of the <code>encoder</code> or <code>encoder</code> type modules. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
